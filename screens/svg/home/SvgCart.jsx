import React, { useRef, useEffect } from "react";
import Svg, { Path, G } from "react-native-svg";
import { Animated, Text, View, StyleSheet } from 'react-native';

const FadeInView = (props) => {
  const fadeAnim = useRef(new Animated.Value(0)).current  // Initial value for opacity: 0

  const animateCart = () => {
    Animated.sequence([ 
      Animated.delay(10), 
      Animated.timing(
        fadeAnim,
        {
          toValue: 1,
          duration: 6000,
          useNativeDriver: true,
        }
      ),
      Animated.timing(
        fadeAnim,
        {
          toValue: 0,
          duration: 6000,
          useNativeDriver: true,
        }
      ),
    ]).start(animateCart)
  };

  React.useEffect(() => {
    animateCart();
  }, []);

  const translateX = fadeAnim.interpolate({
    inputRange: [0, 0.5, 1],
    outputRange: [50, 100, 50]
  });

  return (
    <Animated.View                 // Special animatable View
      style={{
        ...props.style,
        transform: [{ translateX: translateX }, { translateY: -84 }],      // Bind opacity to animated value
      }}
    >
      {props.children}
    </Animated.View>
  );
}

export default function SvgCart() {
  return (
    <View style={styles.svg}>
      <Svg
        width={500}
        height={184}
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <Path
          d="M90.65 43.298h-.999V15.873a15.904 15.904 0 00-4.639-11.224A15.835 15.835 0 0073.813 0H15.838a15.807 15.807 0 00-11.2 4.65A15.875 15.875 0 000 15.872v150.456a15.882 15.882 0 004.639 11.224 15.801 15.801 0 0011.2 4.649h57.974a15.802 15.802 0 0011.2-4.649 15.883 15.883 0 004.638-11.224V62.819h.999V43.3z"
          fill="#E6E6E6"
        />
        <Path
          d="M74.452 4.13h-7.567a5.642 5.642 0 01-.54 5.268 5.621 5.621 0 01-4.663 2.49H28.469a5.611 5.611 0 01-4.664-2.49 5.639 5.639 0 01-.54-5.268h-7.067A11.805 11.805 0 007.834 7.6a11.855 11.855 0 00-3.464 8.382V166.22a11.874 11.874 0 003.464 8.382 11.808 11.808 0 008.364 3.472h58.254a11.809 11.809 0 008.363-3.472 11.862 11.862 0 003.465-8.382V15.983a11.878 11.878 0 00-3.464-8.382 11.826 11.826 0 00-8.364-3.471z"
          fill="#fff"
        />
        <Path
          d="M28.162 34.67h-3.478a.461.461 0 00-.461.463v1.53a.463.463 0 00.46.462h.577v2.293h2.326v-2.293h.576a.46.46 0 00.461-.462v-1.53a.463.463 0 00-.46-.462z"
          fill="#E6E6E6"
        />
        <Path
          d="M31.646 48.674a17.95 17.95 0 01-3.111-10.626.379.379 0 00-.294-.377v-.66h-3.674v.651h-.05a.376.376 0 00-.376.406c.29 4.043-.688 7.669-2.932 10.877-.129.185-.195.406-.188.631l.402 12.453a1.08 1.08 0 001.067 1.04h8.308a1.075 1.075 0 001.067-1.059l.155-12.09a2.185 2.185 0 00-.374-1.246z"
          fill="#E6E6E6"
        />
        <Path
          d="M30.33 52.81h-7.232a.742.742 0 00-.733.858l1.092 7.12h6.276l1.327-7.096a.746.746 0 00-.73-.882z"
          fill="#fff"
        />
        <Path
          d="M66.881 71.974h-3.478a.46.46 0 00-.461.462v1.53a.463.463 0 00.461.462h.576v2.293h2.326v-2.293h.576a.46.46 0 00.461-.462v-1.53a.463.463 0 00-.46-.462z"
          fill="#E6E6E6"
        />
        <Path
          d="M70.365 85.977a17.95 17.95 0 01-3.111-10.626.378.378 0 00-.294-.377v-.661h-3.674v.652h-.05a.376.376 0 00-.376.406c.29 4.043-.688 7.669-2.931 10.877-.13.184-.196.406-.189.63l.402 12.453a1.078 1.078 0 001.067 1.041h8.308a1.081 1.081 0 001.067-1.059l.155-12.09a2.186 2.186 0 00-.374-1.246z"
          fill="#E6E6E6"
        />
        <Path
          d="M69.05 90.113h-7.232a.742.742 0 00-.734.857l1.092 7.12h6.276l1.328-7.096a.746.746 0 00-.73-.88z"
          fill="#fff"
        />
        <Path
          d="M23.272 124.709h-1.65a.219.219 0 00-.218.219v.726a.22.22 0 00.218.219h.274v1.088h1.103v-1.088h.273a.219.219 0 00.219-.219v-.726a.22.22 0 00-.219-.219z"
          fill="#E6E6E6"
        />
        <Path
          d="M24.925 131.351a8.514 8.514 0 01-1.476-5.04.178.178 0 00-.038-.114.177.177 0 00-.102-.065v-.314h-1.742v.31h-.024a.178.178 0 00-.126.052.182.182 0 00-.052.14 7.772 7.772 0 01-1.39 5.16.493.493 0 00-.09.299l.19 5.907a.51.51 0 00.506.493h3.942a.509.509 0 00.506-.502l.073-5.735c.002-.21-.06-.417-.177-.591z"
          fill="#E6E6E6"
        />
        <Path d="M24.358 133.522h-3.761v1.885h3.76v-1.885z" fill="#fff" />
        <Path
          d="M30.952 124.709h-1.65a.219.219 0 00-.218.219v.726a.22.22 0 00.218.219h.274v1.088h1.103v-1.088h.273a.219.219 0 00.22-.219v-.726a.22.22 0 00-.22-.219z"
          fill="#E6E6E6"
        />
        <Path
          d="M32.605 131.351a8.515 8.515 0 01-1.476-5.04.178.178 0 00-.038-.114.178.178 0 00-.101-.065v-.314h-1.743v.31h-.024a.178.178 0 00-.126.052.182.182 0 00-.052.14 7.772 7.772 0 01-1.39 5.16.493.493 0 00-.09.299l.19 5.907a.51.51 0 00.507.493h3.94a.509.509 0 00.507-.502l.073-5.735c.003-.21-.06-.417-.177-.591z"
          fill="#E6E6E6"
        />
        <Path d="M32.038 133.522h-3.76v1.885h3.76v-1.885z" fill="#fff" />
        <Path
          d="M38.633 124.709h-1.65a.219.219 0 00-.22.219v.726a.22.22 0 00.22.219h.273v1.088h1.103v-1.088h.274a.219.219 0 00.218-.219v-.726a.22.22 0 00-.218-.219z"
          fill="#E6E6E6"
        />
        <Path
          d="M40.285 131.351a8.514 8.514 0 01-1.476-5.04.178.178 0 00-.14-.179v-.314h-1.742v.31h-.024a.178.178 0 00-.126.052.184.184 0 00-.052.14 7.773 7.773 0 01-1.39 5.16.492.492 0 00-.09.299l.19 5.907a.51.51 0 00.507.493h3.941a.509.509 0 00.506-.502l.074-5.735c.002-.21-.06-.417-.178-.591z"
          fill="#E6E6E6"
        />
        <Path d="M39.718 133.522h-3.76v1.885h3.76v-1.885z" fill="#fff" />
        <Path
          d="M60.839 110.278H57.36a.465.465 0 00-.426.285.462.462 0 00-.036.177v1.53a.463.463 0 00.462.462h.576v2.293h2.325v-2.293h.577a.459.459 0 00.46-.462v-1.53a.464.464 0 00-.46-.462z"
          fill="#E6E6E6"
        />
        <Path
          d="M64.323 124.281a17.95 17.95 0 01-3.111-10.625.38.38 0 00-.295-.378v-.661h-3.673v.652h-.05a.376.376 0 00-.376.406c.29 4.043-.688 7.669-2.932 10.877-.129.185-.195.406-.188.631l.402 12.453a1.077 1.077 0 001.066 1.04h8.309a1.073 1.073 0 001.067-1.059l.155-12.09a2.186 2.186 0 00-.374-1.246z"
          fill="#E6E6E6"
        />
        <Path
          d="M63.007 128.417h-7.232a.753.753 0 00-.563.26.742.742 0 00-.17.598l1.092 7.119h6.276l1.327-7.095a.746.746 0 00-.73-.882z"
          fill="#fff"
        />
        <Path
          d="M62.738 64.672H42.004c1.45-7.854 1.116-17.339 0-27.539h20.734c-1.087 10.2-1.411 19.685 0 27.539z"
          fill="#E6E6E6"
        />
        <Path
          d="M52.496 55.159a5.002 5.002 0 004.996-5.008 5.002 5.002 0 00-4.996-5.007 5.001 5.001 0 00-4.996 5.008 5.002 5.002 0 004.996 5.007z"
          fill="#fff"
        />
        <Path
          d="M43.753 101.224H23.019c1.45-7.855 1.116-17.34 0-27.54h20.734c-1.087 10.2-1.411 19.685 0 27.54z"
          fill="#E6E6E6"
        />
        <Path
          d="M33.51 91.71a5.002 5.002 0 004.997-5.007 5.002 5.002 0 00-4.996-5.007 5.002 5.002 0 00-4.996 5.007 5.002 5.002 0 004.996 5.007z"
          fill="#fff"
        />
        <Path
          d="M74.478 66.424H53.745c1.45-7.854 1.116-17.339 0-27.539h20.733c-1.086 10.2-1.41 19.685 0 27.54z"
          fill="#E6E6E6"
        />
        <Path
          d="M64.236 56.911a5.002 5.002 0 004.996-5.007 5.002 5.002 0 00-4.996-5.007 5.002 5.002 0 00-4.996 5.007 5.002 5.002 0 004.996 5.007z"
          fill="#fff"
        />
        <Path
          d="M74.478 65.173H53.745c1.45-7.855 1.116-17.34 0-27.54h20.733c-1.086 10.2-1.41 19.685 0 27.54z"
          fill="#E6E6E6"
        />
        <Path
          d="M64.236 55.66a5.002 5.002 0 004.996-5.008 5.002 5.002 0 00-4.996-5.007 5.002 5.002 0 00-4.996 5.007 5.002 5.002 0 004.996 5.007z"
          fill="#fff"
        />
        <Path
          d="M74.478 66.424H53.745c1.45-7.854 1.116-17.339 0-27.539h20.733c-1.086 10.2-1.41 19.685 0 27.54z"
          fill="#E6E6E6"
        />
        <Path
          d="M64.236 56.911a5.002 5.002 0 004.996-5.007 5.002 5.002 0 00-4.996-5.007 5.002 5.002 0 00-4.996 5.007 5.002 5.002 0 004.996 5.007z"
          fill="#fff"
        />
        <Path
          d="M79.224 63.17H11.28v7.51h67.945v-7.51zM79.224 100.473H11.28v7.51h67.945v-7.51zM79.224 137.775H11.28v7.511h67.945v-7.511z"
          fill="#E6E6E6"
        />
      </Svg>
      <FadeInView style={styles.cart}>
        <Svg width={108} height={84} fill="none" xmlns="http://www.w3.org/2000/svg">
          <Path
            d="M85.419 69.246l-16.927-12c5.709-5.573 10.901-13.51 15.867-22.483l16.927 12c-6.764 7.698-12.493 15.254-15.867 22.483z"
            fill="#0FD6D5"
          />
          <Path
            d="M85.424 56.47a5.002 5.002 0 004.996-5.006 5.002 5.002 0 00-4.996-5.008 5.002 5.002 0 00-4.996 5.008 5.002 5.002 0 004.996 5.007z"
            fill="#fff"
          />
          <Path
            d="M62.564 40.479h-3.478a.46.46 0 00-.462.462v1.53a.463.463 0 00.462.462h.576v2.293h2.325v-2.293h.577a.46.46 0 00.46-.462v-1.53a.463.463 0 00-.46-.462z"
            fill="#E6E6E6"
          />
          <Path
            d="M66.047 54.482a17.95 17.95 0 01-3.11-10.626.378.378 0 00-.295-.377v-.66H58.97v.651h-.05a.376.376 0 00-.376.406c.29 4.043-.688 7.669-2.932 10.877-.13.184-.195.406-.188.631l.402 12.452a1.079 1.079 0 001.066 1.04H65.2a1.075 1.075 0 001.067-1.058l.155-12.09a2.185 2.185 0 00-.375-1.246z"
            fill="#0FD6D5"
          />
          <Path
            opacity={0.2}
            d="M61.839 40.977a.998.998 0 01-.995.997.994.994 0 01-.995-.997"
            fill="#000"
          />
          <Path
            d="M64.732 58.618H57.5a.742.742 0 00-.734.858l1.093 7.119h6.276l1.327-7.096a.746.746 0 00-.73-.88z"
            fill="#fff"
          />
          <Path
            d="M52.64 69.226H31.906c1.45-7.854 1.116-17.339 0-27.539H52.64c-1.087 10.2-1.411 19.685 0 27.54z"
            fill="#0FD6D5"
          />
          <Path
            d="M42.398 59.713a5.002 5.002 0 004.996-5.008 5.002 5.002 0 00-4.996-5.006 5.002 5.002 0 00-4.996 5.007 5.002 5.002 0 004.996 5.007z"
            fill="#fff"
          />
          <Path
            d="M95.55 71.045H29.683L15.733 4.96H3.83V1.995h14.302L32.08 68.08h63.47v2.966z"
            fill="#3F3D56"
          />
          <Path
            d="M39.334 83.118c3.502 0 6.34-2.845 6.34-6.354 0-3.51-2.838-6.355-6.34-6.355-3.501 0-6.34 2.845-6.34 6.355 0 3.509 2.839 6.354 6.34 6.354zM86.675 83.118c3.501 0 6.34-2.845 6.34-6.354 0-3.51-2.839-6.355-6.34-6.355-3.502 0-6.34 2.845-6.34 6.355 0 3.509 2.838 6.354 6.34 6.354zM94.35 69.648H30.263L18.955 13.645h86.006a3.04 3.04 0 013.002 3.517L97.351 67.076a3.031 3.031 0 01-1.023 1.845c-.551.472-1.253.73-1.978.727zm-63.391-.847H94.35a2.179 2.179 0 002.166-1.856l10.612-49.914a2.194 2.194 0 00-.5-1.77 2.19 2.19 0 00-1.667-.77h-84.98l10.978 54.31z"
            fill="#3F3D56"
          />
          <Path
            d="M42.722 69.47l-7.406-55.333.834-.138 7.406 55.332-.834.138zM83.897 69.044l-.835-.135L90.252 14l.834.136-7.189 54.908zM64.28 14.068h-.846V69.4h.845V14.068z"
            fill="#3F3D56"
          />
          <Path
            d="M23.274 28.895l-.002.847 81.829.199.002-.848-81.83-.198zM99.329 55.067l-71.89.492.006.848 71.89-.493-.006-.847zM5.097 5.596c2.568 0 4.65-1.138 4.65-2.542S7.665.512 5.097.512C2.53.512.447 1.65.447 3.054s2.083 2.542 4.65 2.542z"
            fill="#3F3D56"
          />
        </Svg>
      </FadeInView>
    </View>
  )
}

const styles = StyleSheet.create({
  svg: {

  },
  cart: {
  }
})